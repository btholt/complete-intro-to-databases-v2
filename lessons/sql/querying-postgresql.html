<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">Querying Postgresql – Complete Intro to Databases v2</title><meta name="description" content="SQL is a very flexible and expressive way to describe what data you want out of a database. In this section Brian talks about the various ways to read from and modify a database using SQL." data-next-head=""/><meta name="keywords" content="postgres,sql,redis,mongodb,neo4j,database,data,agents" data-next-head=""/><meta name="og:description" content="SQL is a very flexible and expressive way to describe what data you want out of a database. In this section Brian talks about the various ways to read from and modify a database using SQL." data-next-head=""/><meta name="og:title" content="Querying Postgresql – Complete Intro to Databases v2" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/3802a39ca373f962.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/3802a39ca373f962.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/dbe15a90055bd265.js" defer=""></script><script src="/_next/static/chunks/49c75c2ed6206f46.js" defer=""></script><script src="/_next/static/chunks/da0ff8adaa6cce90.js" defer=""></script><script src="/_next/static/chunks/turbopack-342361b32f83e6b6.js" defer=""></script><script src="/_next/static/chunks/f189af6b04c7fd39.js" defer=""></script><script src="/_next/static/chunks/turbopack-8b35dea75ba6f85c.js" defer=""></script><script src="/_next/static/Ogv8p-BwCHRQ1PzRpAU9u/_ssgManifest.js" defer=""></script><script src="/_next/static/Ogv8p-BwCHRQ1PzRpAU9u/_buildManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><div id="__next"><link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;display=swap" rel="stylesheet"/><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to Databases v2</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/workshops/databases-v2/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>You&#39;ll find there&#39;s a lot of depth to SQL. There are people who most of their jobs is just writing SQL. But let&#39;s hop into the basics here. First thing I want to do is insert some dummy data into our users database.</p>
<p><a href="https://btholt.github.io/complete-intro-to-databases/sample-postgresql.sql">Click here</a> for a sample set of tables for your database. What this query will do is drop all your existing tables and then re-set them up. At any time you can re-run this to get a fresh copy of your tables. You can literally just copy this whole thing and paste it into your command line connection to PostgreSQL (psql) and it&#39;ll work. There&#39;s a more elegant way to load it from the command line but we&#39;re in Docker and it&#39;s annoying so I&#39;d just copy/paste it. It&#39;ll probably take 90 seconds to run.</p>
<h2>SELECT</h2>
<p>Let&#39;s start with SELECT. This is how you find things in a SQL database. Let&#39;s run again the SELECT statement from our previous section and talk about it.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users;
</code></pre><p>This will get every field (which is what the <code>*</code> means, a.k.a. the wildcard) from the users database. This will be 1000 users.</p>
<h2>LIMIT</h2>
<p>Let&#39;s select fewer users;</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users LIMIT <span class="hljs-number">10</span>;
</code></pre><p>This will scope down to how many records you get to just 10.</p>
<h2>Projection</h2>
<p>Let&#39;s just some of the columns now, not all of them (remember projections?)</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> username, user_id <span class="hljs-keyword">FROM</span> users LIMIT <span class="hljs-number">15</span>;
</code></pre><p>In general it&#39;s a good idea to only select the columns you need. Some of these databases can have 50+ columns. Okay we&#39;ve seen basic reads.</p>
<h2>WHERE</h2>
<p>Let&#39;s find specific records</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> username, email, user_id <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> user_id<span class="hljs-operator">=</span><span class="hljs-number">150</span>;
<span class="hljs-keyword">SELECT</span> username, email, user_id <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> last_login <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> LIMIT <span class="hljs-number">10</span>;
</code></pre><p>The first one will give us one user whose user_id is 150. The second one will give us 10 users that have never logged.</p>
<h2>AND plus date math</h2>
<p>What if we wanted to see if they hadn&#39;t logged in and were created more than six months ago?</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> username, email, user_id, created_on <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> last_login <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">AND</span> created_on <span class="hljs-operator">&lt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">interval</span> <span class="hljs-string">&#x27;6 months&#x27;</span>  LIMIT <span class="hljs-number">10</span>;
</code></pre><ul>
<li>This shows off the AND keyword where you can query multiple conditions.</li>
<li>This shows off a bit of date math too. To be honest every time I have to do date math I have to look it up but here&#39;s the scoop for this one. created_on is a timestamp and we&#39;re comparing to <code>NOW()</code> (the current time of the server) minus the time period of six months. This will give us all users who haven&#39;t ever logged in and have had accounts for six months.</li>
</ul>
<h2>ORDER BY</h2>
<p>What if wanted to find the oldest accounts? Let&#39;s use a sort.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> user_id, email, created_on <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> created_on LIMIT <span class="hljs-number">10</span>;
</code></pre><p>For the newest account, just add <code>DESC</code> (you can put <code>ASC</code> above, it&#39;s just implied)</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> user_id, email, created_on <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> created_on <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">10</span>;
</code></pre><h2>COUNT(*)</h2>
<p>Wondering how many records we have in our database?</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> users;
</code></pre><p>This will tell you how many users we have in the database total. The <code>*</code> represents that we&#39;re just looking total rows. If we wanted to look at how many users have ever logged in (since COUNT will ignore NULL values)</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(last_login) <span class="hljs-keyword">FROM</span> users;
</code></pre><h2>UPDATE, RETURNING</h2>
<p>Let&#39;s say user_id 1 logged in. We&#39;d need to go into their record and update their last_login. Here&#39;s how we&#39;d do that.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> last_login <span class="hljs-operator">=</span> NOW() <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> RETURNING <span class="hljs-operator">*</span>;
</code></pre><p>Tools we already know! Let&#39;s say user_id 2 choose to update their full_name and email</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> full_name<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Brian Holt&#x27;</span>, email <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;lol@example.com&#x27;</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span> RETURNING <span class="hljs-operator">*</span>;
</code></pre><ul>
<li>You just comma separate to do multiple sets.</li>
<li>Make sure you use single quotes. Double quotes cause errors.</li>
<li>RETURNING * is optional. This is basically saying &quot;do the update and return to me the records after they&#39;ve been updated.</li>
</ul>
<h2>DELETE</h2>
<p>This works as you would expect based on what we&#39;ve done before</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
</code></pre></div><div class="lesson-links"><a class="prev" href="/lessons/sql/postgresql">← Previous</a><a class="next" href="/lessons/sql/complex-sql-queries">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="100%" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="100%"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul><div class="theme-icons"><button aria-label="Activate dark mode" title="Activate dark mode" class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="36px" height="100%" viewBox="0 -960 960 960" fill="var(--text-footer)" role="img"><title>Dark Mode Icon</title><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Z"></path></svg></button></div></footer></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"SQL is a very flexible and expressive way to describe what data you want out of a database. In this section Brian talks about the various ways to read from and modify a database using SQL."},"html":"\u003cp\u003eYou\u0026#39;ll find there\u0026#39;s a lot of depth to SQL. There are people who most of their jobs is just writing SQL. But let\u0026#39;s hop into the basics here. First thing I want to do is insert some dummy data into our users database.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://btholt.github.io/complete-intro-to-databases/sample-postgresql.sql\"\u003eClick here\u003c/a\u003e for a sample set of tables for your database. What this query will do is drop all your existing tables and then re-set them up. At any time you can re-run this to get a fresh copy of your tables. You can literally just copy this whole thing and paste it into your command line connection to PostgreSQL (psql) and it\u0026#39;ll work. There\u0026#39;s a more elegant way to load it from the command line but we\u0026#39;re in Docker and it\u0026#39;s annoying so I\u0026#39;d just copy/paste it. It\u0026#39;ll probably take 90 seconds to run.\u003c/p\u003e\n\u003ch2\u003eSELECT\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s start with SELECT. This is how you find things in a SQL database. Let\u0026#39;s run again the SELECT statement from our previous section and talk about it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis will get every field (which is what the \u003ccode\u003e*\u003c/code\u003e means, a.k.a. the wildcard) from the users database. This will be 1000 users.\u003c/p\u003e\n\u003ch2\u003eLIMIT\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s select fewer users;\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users LIMIT \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis will scope down to how many records you get to just 10.\u003c/p\u003e\n\u003ch2\u003eProjection\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s just some of the columns now, not all of them (remember projections?)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e username, user_id \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users LIMIT \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn general it\u0026#39;s a good idea to only select the columns you need. Some of these databases can have 50+ columns. Okay we\u0026#39;ve seen basic reads.\u003c/p\u003e\n\u003ch2\u003eWHERE\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s find specific records\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e username, email, user_id \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e user_id\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e150\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e username, email, user_id \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e last_login \u003cspan class=\"hljs-keyword\"\u003eIS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNULL\u003c/span\u003e LIMIT \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe first one will give us one user whose user_id is 150. The second one will give us 10 users that have never logged.\u003c/p\u003e\n\u003ch2\u003eAND plus date math\u003c/h2\u003e\n\u003cp\u003eWhat if we wanted to see if they hadn\u0026#39;t logged in and were created more than six months ago?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e username, email, user_id, created_on \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e last_login \u003cspan class=\"hljs-keyword\"\u003eIS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNULL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eAND\u003c/span\u003e created_on \u003cspan class=\"hljs-operator\"\u003e\u0026lt;\u003c/span\u003e NOW() \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003einterval\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;6 months\u0026#x27;\u003c/span\u003e  LIMIT \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eThis shows off the AND keyword where you can query multiple conditions.\u003c/li\u003e\n\u003cli\u003eThis shows off a bit of date math too. To be honest every time I have to do date math I have to look it up but here\u0026#39;s the scoop for this one. created_on is a timestamp and we\u0026#39;re comparing to \u003ccode\u003eNOW()\u003c/code\u003e (the current time of the server) minus the time period of six months. This will give us all users who haven\u0026#39;t ever logged in and have had accounts for six months.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eORDER BY\u003c/h2\u003e\n\u003cp\u003eWhat if wanted to find the oldest accounts? Let\u0026#39;s use a sort.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e user_id, email, created_on \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eORDER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eBY\u003c/span\u003e created_on LIMIT \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor the newest account, just add \u003ccode\u003eDESC\u003c/code\u003e (you can put \u003ccode\u003eASC\u003c/code\u003e above, it\u0026#39;s just implied)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e user_id, email, created_on \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eORDER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eBY\u003c/span\u003e created_on \u003cspan class=\"hljs-keyword\"\u003eDESC\u003c/span\u003e LIMIT \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eCOUNT(*)\u003c/h2\u003e\n\u003cp\u003eWondering how many records we have in our database?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eCOUNT\u003c/span\u003e(\u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis will tell you how many users we have in the database total. The \u003ccode\u003e*\u003c/code\u003e represents that we\u0026#39;re just looking total rows. If we wanted to look at how many users have ever logged in (since COUNT will ignore NULL values)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eCOUNT\u003c/span\u003e(last_login) \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eUPDATE, RETURNING\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s say user_id 1 logged in. We\u0026#39;d need to go into their record and update their last_login. Here\u0026#39;s how we\u0026#39;d do that.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e last_login \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e NOW() \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e user_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e RETURNING \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTools we already know! Let\u0026#39;s say user_id 2 choose to update their full_name and email\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e full_name\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Brian Holt\u0026#x27;\u003c/span\u003e, email \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lol@example.com\u0026#x27;\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e user_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e RETURNING \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eYou just comma separate to do multiple sets.\u003c/li\u003e\n\u003cli\u003eMake sure you use single quotes. Double quotes cause errors.\u003c/li\u003e\n\u003cli\u003eRETURNING * is optional. This is basically saying \u0026quot;do the update and return to me the records after they\u0026#39;ve been updated.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDELETE\u003c/h2\u003e\n\u003cp\u003eThis works as you would expect based on what we\u0026#39;ve done before\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eDELETE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e user_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e","markdown":"\nYou'll find there's a lot of depth to SQL. There are people who most of their jobs is just writing SQL. But let's hop into the basics here. First thing I want to do is insert some dummy data into our users database.\n\n[Click here][sql] for a sample set of tables for your database. What this query will do is drop all your existing tables and then re-set them up. At any time you can re-run this to get a fresh copy of your tables. You can literally just copy this whole thing and paste it into your command line connection to PostgreSQL (psql) and it'll work. There's a more elegant way to load it from the command line but we're in Docker and it's annoying so I'd just copy/paste it. It'll probably take 90 seconds to run.\n\n## SELECT\n\nLet's start with SELECT. This is how you find things in a SQL database. Let's run again the SELECT statement from our previous section and talk about it.\n\n```sql\nSELECT * FROM users;\n```\n\nThis will get every field (which is what the `*` means, a.k.a. the wildcard) from the users database. This will be 1000 users.\n\n## LIMIT\n\nLet's select fewer users;\n\n```sql\nSELECT * FROM users LIMIT 10;\n```\n\nThis will scope down to how many records you get to just 10.\n\n## Projection\n\nLet's just some of the columns now, not all of them (remember projections?)\n\n```sql\nSELECT username, user_id FROM users LIMIT 15;\n```\n\nIn general it's a good idea to only select the columns you need. Some of these databases can have 50+ columns. Okay we've seen basic reads.\n\n## WHERE\n\nLet's find specific records\n\n```sql\nSELECT username, email, user_id FROM users WHERE user_id=150;\nSELECT username, email, user_id FROM users WHERE last_login IS NULL LIMIT 10;\n```\n\nThe first one will give us one user whose user_id is 150. The second one will give us 10 users that have never logged.\n\n## AND plus date math\n\nWhat if we wanted to see if they hadn't logged in and were created more than six months ago?\n\n```sql\nSELECT username, email, user_id, created_on FROM users WHERE last_login IS NULL AND created_on \u003c NOW() - interval '6 months'  LIMIT 10;\n```\n\n- This shows off the AND keyword where you can query multiple conditions.\n- This shows off a bit of date math too. To be honest every time I have to do date math I have to look it up but here's the scoop for this one. created_on is a timestamp and we're comparing to `NOW()` (the current time of the server) minus the time period of six months. This will give us all users who haven't ever logged in and have had accounts for six months.\n\n## ORDER BY\n\nWhat if wanted to find the oldest accounts? Let's use a sort.\n\n```sql\nSELECT user_id, email, created_on FROM users ORDER BY created_on LIMIT 10;\n```\n\nFor the newest account, just add `DESC` (you can put `ASC` above, it's just implied)\n\n```sql\nSELECT user_id, email, created_on FROM users ORDER BY created_on DESC LIMIT 10;\n```\n\n## COUNT(\\*)\n\nWondering how many records we have in our database?\n\n```sql\nSELECT COUNT(*) FROM users;\n```\n\nThis will tell you how many users we have in the database total. The `*` represents that we're just looking total rows. If we wanted to look at how many users have ever logged in (since COUNT will ignore NULL values)\n\n```sql\nSELECT COUNT(last_login) FROM users;\n```\n\n## UPDATE, RETURNING\n\nLet's say user_id 1 logged in. We'd need to go into their record and update their last_login. Here's how we'd do that.\n\n```sql\nUPDATE users SET last_login = NOW() WHERE user_id = 1 RETURNING *;\n```\n\nTools we already know! Let's say user_id 2 choose to update their full_name and email\n\n```sql\nUPDATE users SET full_name= 'Brian Holt', email = 'lol@example.com' WHERE user_id = 2 RETURNING *;\n```\n\n- You just comma separate to do multiple sets.\n- Make sure you use single quotes. Double quotes cause errors.\n- RETURNING \\* is optional. This is basically saying \"do the update and return to me the records after they've been updated.\n\n## DELETE\n\nThis works as you would expect based on what we've done before\n\n```sql\nDELETE FROM users WHERE user_id = 1000;\n```\n\n[sql]: https://btholt.github.io/complete-intro-to-databases/sample-postgresql.sql\n","slug":"querying-postgresql","title":"Querying Postgresql","section":"Sql","icon":"info-circle","filePath":"/home/runner/work/complete-intro-to-databases-v2/complete-intro-to-databases-v2/lessons/03-sql/C-querying-postgresql.md","nextSlug":"/lessons/sql/complex-sql-queries","prevSlug":"/lessons/sql/postgresql"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"sql","slug":"querying-postgresql"},"buildId":"Ogv8p-BwCHRQ1PzRpAU9u","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>