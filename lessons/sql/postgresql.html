<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">PostgreSQL – Complete Intro to Databases v2</title><meta name="description" content="PostgreSQL is a relational database that lets developers write amazing apps. Brian goes over how to get PostgreSQL started on your computer and help you write your first query." data-next-head=""/><meta name="keywords" content="postgres,sql,redis,mongodb,neo4j,database,data,agents" data-next-head=""/><meta name="og:description" content="PostgreSQL is a relational database that lets developers write amazing apps. Brian goes over how to get PostgreSQL started on your computer and help you write your first query." data-next-head=""/><meta name="og:title" content="PostgreSQL – Complete Intro to Databases v2" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/3802a39ca373f962.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/3802a39ca373f962.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/dbe15a90055bd265.js" defer=""></script><script src="/_next/static/chunks/49c75c2ed6206f46.js" defer=""></script><script src="/_next/static/chunks/da0ff8adaa6cce90.js" defer=""></script><script src="/_next/static/chunks/turbopack-342361b32f83e6b6.js" defer=""></script><script src="/_next/static/chunks/f189af6b04c7fd39.js" defer=""></script><script src="/_next/static/chunks/turbopack-8b35dea75ba6f85c.js" defer=""></script><script src="/_next/static/Ogv8p-BwCHRQ1PzRpAU9u/_ssgManifest.js" defer=""></script><script src="/_next/static/Ogv8p-BwCHRQ1PzRpAU9u/_buildManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><div id="__next"><link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;display=swap" rel="stylesheet"/><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to Databases v2</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/workshops/databases-v2/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>So we examined a bit of the general relational databases in the previous section, let&#39;s get into some interacting with some databases.</p>
<h2>Let&#39;s get PostgreSQL going</h2>
<p>Let&#39;s start by getting a PostgreSQL container going. I&#39;m going to use version 13.0 (the latest container available) and I&#39;d recommend for this tutorial you do the same. While newer ones might be available, this is the one that will work with this tutorial.</p>
<pre><code class="hljs language-bash">docker run --name my-postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 -d --<span class="hljs-built_in">rm</span> postgres:13.0

docker <span class="hljs-built_in">exec</span> -it -u postgres my-postgres psql
</code></pre><p>We have to give it a password or PostgreSQL won&#39;t start by default. Don&#39;t worry, this isn&#39;t how&#39;d you start it in production.</p>
<p>At this point you should</p>
<h2>Databases and Tables</h2>
<p>PostgreSQL has the same concept of databases as MongoDB. This will be a group of tables that are related to similar problem-area. It&#39;ll be up to you how you choose to group these. Some apps are focused enough to all be in one database; others will need many databases. It&#39;s up to you and your data architect to figure out how to do that. In general, things that should be scaled separately (like maybe payment transactions and items in your store?)</p>
<p>Tables are similar to collections. This will be a group of records. It&#39;s like one Excel spreadsheet. A record is like an object in MongoDB. It&#39;s one thing in a table. One record would be a user in the users database.</p>
<p>Tables will have a defined schema. Like in Excel, one column will reprent one bit of information, so too will a field in a record represent one bit of information. As opposed to MongoDB, this schema has to be defined in advance and cannot be done on the fly. Altering a table&#39;s schema is a hefty operation and on big tables can literally takes hours or days to do. Forethought is a lot more important here.</p>
<p>This is a simple intro to this. There&#39;s a lot more to this but we&#39;ll get into as we go through our defined example.</p>
<h2>Our first SQL queries</h2>
<p>The first order of business it create a new database. And we&#39;re going to do that using SQL. All SQL is fairly similar but are not necessarily drop-in compatible with each other. So while this would be similar in getting started to MySQL, it wouldn&#39;t be identical.</p>
<p>First thing you&#39;ll notice is I&#39;ll capitlize all the key words. This is to make reading the query easier, you can see what&#39;s a key word and what&#39;s not at a glance. And moreover it&#39;s just common to do so I stick with common best practices.</p>
<p>By default you connect to database &quot;postgres&quot; which is just a default database name. Let&#39;s make our own called <code>message_board</code>.</p>
<p>So go ahead and run your first query here to create a new database. <strong>Make sure you include the <code>;</code> at the end.</strong> While the semi-colon is optional in JS it is not in SQL! It thinks you&#39;re still going until you include that <code>;</code>.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> DATABASE message_boards;
</code></pre><p>You should see <code>CREATE DATABASE</code> underneath that as a confirmation that it went through. Great! Now we have a new database to switch to, so let&#39;s do that.</p>
<pre><code class="hljs language-sql">\c message_boards;
<span class="hljs-comment">-- \connect message_boards works too</span>
</code></pre><p>This <code>\</code> notation is how you give admin commands to PostgreSQL through its <code>psql</code> CLI which is what we&#39;re using right now. In this case we&#39;re saying connect to this new database. Let&#39;s try a few other commands real quick!</p>
<pre><code class="hljs language-sql"><span class="hljs-comment">-- see all databases</span>
\l

<span class="hljs-comment">-- see all tables in this database, probably won&#x27;t see anything</span>
\d

<span class="hljs-comment">-- see all available commands</span>
\?

<span class="hljs-comment">-- see available queries</span>
\h

<span class="hljs-comment">-- run a shell command</span>
\<span class="hljs-operator">!</span> ls <span class="hljs-operator">&amp;&amp;</span> echo &quot;hi from shell!&quot;
</code></pre><p>In case you didn&#39;t know, <code>--</code> is how you do comments in SQL.</p>
<h2>First table</h2>
<p>Okay, so now we have a database and we&#39;re connected to it, let&#39;s create our first table.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE TABLE</span> users (
  user_id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY KEY</span> GENERATED ALWAYS <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
  username <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">25</span> ) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT NULL</span>,
  email <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">50</span> ) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT NULL</span>,
  full_name <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">100</span> ) <span class="hljs-keyword">NOT NULL</span>,
  last_login <span class="hljs-type">TIMESTAMP</span>,
  created_on <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span>
);
</code></pre><p>So let&#39;s break this down</p>
<ul>
<li>CREATE TABLE is the command we&#39;ll use to create a new table. We&#39;re naming it the users table</li>
<li><code>user_id</code> will be an incrementing field The first users will have a user_if of 1, the second one will have user_id of 2, etc. That&#39;s what the <code>GENERATED ALWAYS AS IDENTITY</code> means. It&#39;s autoincrementing. The PRIMARY KEY part means it&#39;s what the table will be indexed on which means inherently that it is indexed.</li>
<li>Previously PostgreSQL used a field type called <code>SERIAL</code> to describe the serially incrementing IDs. The <code>GENERATED AS ALWAYS</code> syntax is newer, more compliant to the generic SQL spec, and works better. Always use it over <code>SERIAL</code>.</li>
<li>Before, in MongoDB, we relied on the <code>_id</code> field to be that key field. PostgreSQL doesn&#39;t do that for you by default.</li>
<li>We created two VARCHARS which is the SQL way of saying string. The username will have a character limit of 25 and the email will have a charcter limit of 50. Each of them will be guaranteed unique (thanks to UNIQUE) and to not be omitted (thanks to NOT NULL).</li>
<li>They could still be empty strings with NOT NULL but you&#39;d have to intentionally specify that.</li>
<li>full_name is not unique so you could have two Sally Rogers.</li>
<li>We our last_login field it will be the last time the user logged in. We could use this later to clean out inactive accounts. Notice this doesn&#39;t have NOT NULL so when we create a new user they can have a null login time because they haven&#39;t logged in yet.</li>
<li>Lastly we&#39;ll provide it with a date via the created_on field so we can keep track of when a user was created.</li>
</ul>
<p>We won&#39;t be going into too many more PostgreSQL data types but there are a lot. <a href="https://www.postgresql.org/docs/9.5/datatype.html#DATATYPE-TABLE">See here</a>.</p>
<h2>First record</h2>
<p>Let&#39;s insert a user into our new table. This is like adding a new row into a spreadsheet.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT INTO</span> users (username, email, full_name, created_on) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;btholt&#x27;</span>, <span class="hljs-string">&#x27;lol@example.com&#x27;</span>, <span class="hljs-string">&#x27;Brian Holt&#x27;</span>, NOW());
</code></pre><ul>
<li>This is how you insert a new record into a relational database.</li>
<li>The <code>INSERT INTO</code> tells the SQL engine you&#39;re going to be doing an insert, and we&#39;re doing it into <code>users</code>.</li>
<li>The <code>()</code> is where you provide the order you&#39;re going to be giving the fields to PostgreSQL in the VALUES part.</li>
<li>Notice we&#39;re not providing user_id since PostgreSQL will provide that itself.</li>
<li>We&#39;re also not providing a <code>last_login</code> time because it&#39;s not required and in theory the user hasn&#39;t logged in yet.</li>
<li>For the created_on, we&#39;re using a special PostgreSQL built in function called <code>NOW()</code>. This provide the current time as a parameter in that space.</li>
</ul>
<p>You should see <code>INSERT 0 1</code> to let you know that the query succeeded. The 1 represents that 1 record was inserted successfully and the 0 represents the OID which we&#39;re not covering nor using and will be 0 for us throughout our course i.e. no need to worry about it.</p>
<h2>See your first record</h2>
<p>We&#39;re about to get into more advance querying but I want you to see the fruits of your labor! Run this query to fetch every record and every field from a table</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users;
</code></pre><p>You should see your one row you&#39;ve inserted! Good job! You&#39;re off to a great start. We&#39;ll go over the query we just ran in the next section.</p>
</div><div class="lesson-links"><a class="prev" href="/lessons/sql/intro-to-sql-databases">← Previous</a><a class="next" href="/lessons/sql/querying-postgresql">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="100%" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="100%"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul><div class="theme-icons"><button aria-label="Activate dark mode" title="Activate dark mode" class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="36px" height="100%" viewBox="0 -960 960 960" fill="var(--text-footer)" role="img"><title>Dark Mode Icon</title><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Z"></path></svg></button></div></footer></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"PostgreSQL","description":"PostgreSQL is a relational database that lets developers write amazing apps. Brian goes over how to get PostgreSQL started on your computer and help you write your first query."},"html":"\u003cp\u003eSo we examined a bit of the general relational databases in the previous section, let\u0026#39;s get into some interacting with some databases.\u003c/p\u003e\n\u003ch2\u003eLet\u0026#39;s get PostgreSQL going\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s start by getting a PostgreSQL container going. I\u0026#39;m going to use version 13.0 (the latest container available) and I\u0026#39;d recommend for this tutorial you do the same. While newer ones might be available, this is the one that will work with this tutorial.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edocker run --name my-postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 -d --\u003cspan class=\"hljs-built_in\"\u003erm\u003c/span\u003e postgres:13.0\n\ndocker \u003cspan class=\"hljs-built_in\"\u003eexec\u003c/span\u003e -it -u postgres my-postgres psql\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe have to give it a password or PostgreSQL won\u0026#39;t start by default. Don\u0026#39;t worry, this isn\u0026#39;t how\u0026#39;d you start it in production.\u003c/p\u003e\n\u003cp\u003eAt this point you should\u003c/p\u003e\n\u003ch2\u003eDatabases and Tables\u003c/h2\u003e\n\u003cp\u003ePostgreSQL has the same concept of databases as MongoDB. This will be a group of tables that are related to similar problem-area. It\u0026#39;ll be up to you how you choose to group these. Some apps are focused enough to all be in one database; others will need many databases. It\u0026#39;s up to you and your data architect to figure out how to do that. In general, things that should be scaled separately (like maybe payment transactions and items in your store?)\u003c/p\u003e\n\u003cp\u003eTables are similar to collections. This will be a group of records. It\u0026#39;s like one Excel spreadsheet. A record is like an object in MongoDB. It\u0026#39;s one thing in a table. One record would be a user in the users database.\u003c/p\u003e\n\u003cp\u003eTables will have a defined schema. Like in Excel, one column will reprent one bit of information, so too will a field in a record represent one bit of information. As opposed to MongoDB, this schema has to be defined in advance and cannot be done on the fly. Altering a table\u0026#39;s schema is a hefty operation and on big tables can literally takes hours or days to do. Forethought is a lot more important here.\u003c/p\u003e\n\u003cp\u003eThis is a simple intro to this. There\u0026#39;s a lot more to this but we\u0026#39;ll get into as we go through our defined example.\u003c/p\u003e\n\u003ch2\u003eOur first SQL queries\u003c/h2\u003e\n\u003cp\u003eThe first order of business it create a new database. And we\u0026#39;re going to do that using SQL. All SQL is fairly similar but are not necessarily drop-in compatible with each other. So while this would be similar in getting started to MySQL, it wouldn\u0026#39;t be identical.\u003c/p\u003e\n\u003cp\u003eFirst thing you\u0026#39;ll notice is I\u0026#39;ll capitlize all the key words. This is to make reading the query easier, you can see what\u0026#39;s a key word and what\u0026#39;s not at a glance. And moreover it\u0026#39;s just common to do so I stick with common best practices.\u003c/p\u003e\n\u003cp\u003eBy default you connect to database \u0026quot;postgres\u0026quot; which is just a default database name. Let\u0026#39;s make our own called \u003ccode\u003emessage_board\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eSo go ahead and run your first query here to create a new database. \u003cstrong\u003eMake sure you include the \u003ccode\u003e;\u003c/code\u003e at the end.\u003c/strong\u003e While the semi-colon is optional in JS it is not in SQL! It thinks you\u0026#39;re still going until you include that \u003ccode\u003e;\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e DATABASE message_boards;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou should see \u003ccode\u003eCREATE DATABASE\u003c/code\u003e underneath that as a confirmation that it went through. Great! Now we have a new database to switch to, so let\u0026#39;s do that.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\\c message_boards;\n\u003cspan class=\"hljs-comment\"\u003e-- \\connect message_boards works too\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis \u003ccode\u003e\\\u003c/code\u003e notation is how you give admin commands to PostgreSQL through its \u003ccode\u003epsql\u003c/code\u003e CLI which is what we\u0026#39;re using right now. In this case we\u0026#39;re saying connect to this new database. Let\u0026#39;s try a few other commands real quick!\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- see all databases\u003c/span\u003e\n\\l\n\n\u003cspan class=\"hljs-comment\"\u003e-- see all tables in this database, probably won\u0026#x27;t see anything\u003c/span\u003e\n\\d\n\n\u003cspan class=\"hljs-comment\"\u003e-- see all available commands\u003c/span\u003e\n\\?\n\n\u003cspan class=\"hljs-comment\"\u003e-- see available queries\u003c/span\u003e\n\\h\n\n\u003cspan class=\"hljs-comment\"\u003e-- run a shell command\u003c/span\u003e\n\\\u003cspan class=\"hljs-operator\"\u003e!\u003c/span\u003e ls \u003cspan class=\"hljs-operator\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e echo \u0026quot;hi from shell!\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn case you didn\u0026#39;t know, \u003ccode\u003e--\u003c/code\u003e is how you do comments in SQL.\u003c/p\u003e\n\u003ch2\u003eFirst table\u003c/h2\u003e\n\u003cp\u003eOkay, so now we have a database and we\u0026#39;re connected to it, let\u0026#39;s create our first table.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE TABLE\u003c/span\u003e users (\n  user_id \u003cspan class=\"hljs-type\"\u003eINTEGER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ePRIMARY KEY\u003c/span\u003e GENERATED ALWAYS \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eIDENTITY\u003c/span\u003e,\n  username \u003cspan class=\"hljs-type\"\u003eVARCHAR\u003c/span\u003e ( \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e ) \u003cspan class=\"hljs-keyword\"\u003eUNIQUE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNOT NULL\u003c/span\u003e,\n  email \u003cspan class=\"hljs-type\"\u003eVARCHAR\u003c/span\u003e ( \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e ) \u003cspan class=\"hljs-keyword\"\u003eUNIQUE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNOT NULL\u003c/span\u003e,\n  full_name \u003cspan class=\"hljs-type\"\u003eVARCHAR\u003c/span\u003e ( \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e ) \u003cspan class=\"hljs-keyword\"\u003eNOT NULL\u003c/span\u003e,\n  last_login \u003cspan class=\"hljs-type\"\u003eTIMESTAMP\u003c/span\u003e,\n  created_on \u003cspan class=\"hljs-type\"\u003eTIMESTAMP\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNOT NULL\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo let\u0026#39;s break this down\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCREATE TABLE is the command we\u0026#39;ll use to create a new table. We\u0026#39;re naming it the users table\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003euser_id\u003c/code\u003e will be an incrementing field The first users will have a user_if of 1, the second one will have user_id of 2, etc. That\u0026#39;s what the \u003ccode\u003eGENERATED ALWAYS AS IDENTITY\u003c/code\u003e means. It\u0026#39;s autoincrementing. The PRIMARY KEY part means it\u0026#39;s what the table will be indexed on which means inherently that it is indexed.\u003c/li\u003e\n\u003cli\u003ePreviously PostgreSQL used a field type called \u003ccode\u003eSERIAL\u003c/code\u003e to describe the serially incrementing IDs. The \u003ccode\u003eGENERATED AS ALWAYS\u003c/code\u003e syntax is newer, more compliant to the generic SQL spec, and works better. Always use it over \u003ccode\u003eSERIAL\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eBefore, in MongoDB, we relied on the \u003ccode\u003e_id\u003c/code\u003e field to be that key field. PostgreSQL doesn\u0026#39;t do that for you by default.\u003c/li\u003e\n\u003cli\u003eWe created two VARCHARS which is the SQL way of saying string. The username will have a character limit of 25 and the email will have a charcter limit of 50. Each of them will be guaranteed unique (thanks to UNIQUE) and to not be omitted (thanks to NOT NULL).\u003c/li\u003e\n\u003cli\u003eThey could still be empty strings with NOT NULL but you\u0026#39;d have to intentionally specify that.\u003c/li\u003e\n\u003cli\u003efull_name is not unique so you could have two Sally Rogers.\u003c/li\u003e\n\u003cli\u003eWe our last_login field it will be the last time the user logged in. We could use this later to clean out inactive accounts. Notice this doesn\u0026#39;t have NOT NULL so when we create a new user they can have a null login time because they haven\u0026#39;t logged in yet.\u003c/li\u003e\n\u003cli\u003eLastly we\u0026#39;ll provide it with a date via the created_on field so we can keep track of when a user was created.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWe won\u0026#39;t be going into too many more PostgreSQL data types but there are a lot. \u003ca href=\"https://www.postgresql.org/docs/9.5/datatype.html#DATATYPE-TABLE\"\u003eSee here\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eFirst record\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s insert a user into our new table. This is like adding a new row into a spreadsheet.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT INTO\u003c/span\u003e users (username, email, full_name, created_on) \u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;btholt\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lol@example.com\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Brian Holt\u0026#x27;\u003c/span\u003e, NOW());\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eThis is how you insert a new record into a relational database.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003eINSERT INTO\u003c/code\u003e tells the SQL engine you\u0026#39;re going to be doing an insert, and we\u0026#39;re doing it into \u003ccode\u003eusers\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003e()\u003c/code\u003e is where you provide the order you\u0026#39;re going to be giving the fields to PostgreSQL in the VALUES part.\u003c/li\u003e\n\u003cli\u003eNotice we\u0026#39;re not providing user_id since PostgreSQL will provide that itself.\u003c/li\u003e\n\u003cli\u003eWe\u0026#39;re also not providing a \u003ccode\u003elast_login\u003c/code\u003e time because it\u0026#39;s not required and in theory the user hasn\u0026#39;t logged in yet.\u003c/li\u003e\n\u003cli\u003eFor the created_on, we\u0026#39;re using a special PostgreSQL built in function called \u003ccode\u003eNOW()\u003c/code\u003e. This provide the current time as a parameter in that space.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou should see \u003ccode\u003eINSERT 0 1\u003c/code\u003e to let you know that the query succeeded. The 1 represents that 1 record was inserted successfully and the 0 represents the OID which we\u0026#39;re not covering nor using and will be 0 for us throughout our course i.e. no need to worry about it.\u003c/p\u003e\n\u003ch2\u003eSee your first record\u003c/h2\u003e\n\u003cp\u003eWe\u0026#39;re about to get into more advance querying but I want you to see the fruits of your labor! Run this query to fetch every record and every field from a table\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e users;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou should see your one row you\u0026#39;ve inserted! Good job! You\u0026#39;re off to a great start. We\u0026#39;ll go over the query we just ran in the next section.\u003c/p\u003e\n","markdown":"\nSo we examined a bit of the general relational databases in the previous section, let's get into some interacting with some databases.\n\n## Let's get PostgreSQL going\n\nLet's start by getting a PostgreSQL container going. I'm going to use version 13.0 (the latest container available) and I'd recommend for this tutorial you do the same. While newer ones might be available, this is the one that will work with this tutorial.\n\n```bash\ndocker run --name my-postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 -d --rm postgres:13.0\n\ndocker exec -it -u postgres my-postgres psql\n```\n\nWe have to give it a password or PostgreSQL won't start by default. Don't worry, this isn't how'd you start it in production.\n\nAt this point you should\n\n## Databases and Tables\n\nPostgreSQL has the same concept of databases as MongoDB. This will be a group of tables that are related to similar problem-area. It'll be up to you how you choose to group these. Some apps are focused enough to all be in one database; others will need many databases. It's up to you and your data architect to figure out how to do that. In general, things that should be scaled separately (like maybe payment transactions and items in your store?)\n\nTables are similar to collections. This will be a group of records. It's like one Excel spreadsheet. A record is like an object in MongoDB. It's one thing in a table. One record would be a user in the users database.\n\nTables will have a defined schema. Like in Excel, one column will reprent one bit of information, so too will a field in a record represent one bit of information. As opposed to MongoDB, this schema has to be defined in advance and cannot be done on the fly. Altering a table's schema is a hefty operation and on big tables can literally takes hours or days to do. Forethought is a lot more important here.\n\nThis is a simple intro to this. There's a lot more to this but we'll get into as we go through our defined example.\n\n## Our first SQL queries\n\nThe first order of business it create a new database. And we're going to do that using SQL. All SQL is fairly similar but are not necessarily drop-in compatible with each other. So while this would be similar in getting started to MySQL, it wouldn't be identical.\n\nFirst thing you'll notice is I'll capitlize all the key words. This is to make reading the query easier, you can see what's a key word and what's not at a glance. And moreover it's just common to do so I stick with common best practices.\n\nBy default you connect to database \"postgres\" which is just a default database name. Let's make our own called `message_board`.\n\nSo go ahead and run your first query here to create a new database. **Make sure you include the `;` at the end.** While the semi-colon is optional in JS it is not in SQL! It thinks you're still going until you include that `;`.\n\n```sql\nCREATE DATABASE message_boards;\n```\n\nYou should see `CREATE DATABASE` underneath that as a confirmation that it went through. Great! Now we have a new database to switch to, so let's do that.\n\n```sql\n\\c message_boards;\n-- \\connect message_boards works too\n```\n\nThis `\\` notation is how you give admin commands to PostgreSQL through its `psql` CLI which is what we're using right now. In this case we're saying connect to this new database. Let's try a few other commands real quick!\n\n```sql\n-- see all databases\n\\l\n\n-- see all tables in this database, probably won't see anything\n\\d\n\n-- see all available commands\n\\?\n\n-- see available queries\n\\h\n\n-- run a shell command\n\\! ls \u0026\u0026 echo \"hi from shell!\"\n```\n\nIn case you didn't know, `--` is how you do comments in SQL.\n\n## First table\n\nOkay, so now we have a database and we're connected to it, let's create our first table.\n\n```sql\nCREATE TABLE users (\n  user_id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,\n  username VARCHAR ( 25 ) UNIQUE NOT NULL,\n  email VARCHAR ( 50 ) UNIQUE NOT NULL,\n  full_name VARCHAR ( 100 ) NOT NULL,\n  last_login TIMESTAMP,\n  created_on TIMESTAMP NOT NULL\n);\n```\n\nSo let's break this down\n\n- CREATE TABLE is the command we'll use to create a new table. We're naming it the users table\n- `user_id` will be an incrementing field The first users will have a user_if of 1, the second one will have user_id of 2, etc. That's what the `GENERATED ALWAYS AS IDENTITY` means. It's autoincrementing. The PRIMARY KEY part means it's what the table will be indexed on which means inherently that it is indexed.\n- Previously PostgreSQL used a field type called `SERIAL` to describe the serially incrementing IDs. The `GENERATED AS ALWAYS` syntax is newer, more compliant to the generic SQL spec, and works better. Always use it over `SERIAL`.\n- Before, in MongoDB, we relied on the `_id` field to be that key field. PostgreSQL doesn't do that for you by default.\n- We created two VARCHARS which is the SQL way of saying string. The username will have a character limit of 25 and the email will have a charcter limit of 50. Each of them will be guaranteed unique (thanks to UNIQUE) and to not be omitted (thanks to NOT NULL).\n- They could still be empty strings with NOT NULL but you'd have to intentionally specify that.\n- full_name is not unique so you could have two Sally Rogers.\n- We our last_login field it will be the last time the user logged in. We could use this later to clean out inactive accounts. Notice this doesn't have NOT NULL so when we create a new user they can have a null login time because they haven't logged in yet.\n- Lastly we'll provide it with a date via the created_on field so we can keep track of when a user was created.\n\nWe won't be going into too many more PostgreSQL data types but there are a lot. [See here][types].\n\n## First record\n\nLet's insert a user into our new table. This is like adding a new row into a spreadsheet.\n\n```sql\nINSERT INTO users (username, email, full_name, created_on) VALUES ('btholt', 'lol@example.com', 'Brian Holt', NOW());\n```\n\n- This is how you insert a new record into a relational database.\n- The `INSERT INTO` tells the SQL engine you're going to be doing an insert, and we're doing it into `users`.\n- The `()` is where you provide the order you're going to be giving the fields to PostgreSQL in the VALUES part.\n- Notice we're not providing user_id since PostgreSQL will provide that itself.\n- We're also not providing a `last_login` time because it's not required and in theory the user hasn't logged in yet.\n- For the created_on, we're using a special PostgreSQL built in function called `NOW()`. This provide the current time as a parameter in that space.\n\nYou should see `INSERT 0 1` to let you know that the query succeeded. The 1 represents that 1 record was inserted successfully and the 0 represents the OID which we're not covering nor using and will be 0 for us throughout our course i.e. no need to worry about it.\n\n## See your first record\n\nWe're about to get into more advance querying but I want you to see the fruits of your labor! Run this query to fetch every record and every field from a table\n\n```sql\nSELECT * FROM users;\n```\n\nYou should see your one row you've inserted! Good job! You're off to a great start. We'll go over the query we just ran in the next section.\n\n[types]: https://www.postgresql.org/docs/9.5/datatype.html#DATATYPE-TABLE\n","slug":"postgresql","title":"PostgreSQL","section":"Sql","icon":"info-circle","filePath":"/home/runner/work/complete-intro-to-databases-v2/complete-intro-to-databases-v2/lessons/03-sql/B-postgresql.md","nextSlug":"/lessons/sql/querying-postgresql","prevSlug":"/lessons/sql/intro-to-sql-databases"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"sql","slug":"postgresql"},"buildId":"Ogv8p-BwCHRQ1PzRpAU9u","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>