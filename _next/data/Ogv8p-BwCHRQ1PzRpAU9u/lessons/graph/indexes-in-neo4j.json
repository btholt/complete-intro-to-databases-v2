{"pageProps":{"post":{"attributes":{"description":"Query performance in a graph database is just as important as it is in any database. Brian teaches you to profile Neo4j queries and how to tune them for performance with indexes."},"html":"<p>Just as with PostgreSQL and MongoDB, frequently having an index becomes very important to query performance for your &quot;hot paths&quot; for your database querying habits.</p>\n<p>Let&#39;s say a new facet of our app is that people can find celebrities born the same year they are. Your query would look something like this.</p>\n<pre><code class=\"hljs language-cql\">MATCH (p:Person) WHERE p.born = 1967 RETURN p;\n</code></pre><p>A fairly simple query but like we&#39;ve seen before, this will look at every person on the graph to examine their birth year. Imagine you had all of IMDB&#39;s database; that query could wreck a system. Let&#39;s use EXPLAIN to see why.</p>\n<pre><code class=\"hljs language-cql\">EXPLAIN MATCH (p:Person) WHERE p.born = 1967 RETURN p;\n</code></pre><p>You&#39;ll see it gives you a pretty in-depth answer that it will scan all 133 persons and then narrow it down to 13. Let&#39;s throw an index on Person&#39;s born attribute.</p>\n<pre><code class=\"hljs language-cql\">CREATE INDEX FOR (p:Person) ON (p.born);\nEXPLAIN MATCH (p:Person) WHERE p.born = 1967 RETURN p;\nMATCH (p:Person) WHERE p.born = 1967 RETURN p;\n</code></pre><p>Now you&#39;ll see it immediately can narrow it down. My computer saw a 6x increase in query speed.</p>\n<p><a href=\"https://neo4j.com/docs/cypher-manual/4.1/query-tuning/\">Neo4j has a great article on query planning</a> if you want to dig further into improving query performance.</p>\n<p>Lastly, sometimes it&#39;s useful to see all existing indexes. Try this:</p>\n<pre><code class=\"hljs language-cql\">CALL db.indexes;\n</code></pre>","markdown":"\nJust as with PostgreSQL and MongoDB, frequently having an index becomes very important to query performance for your \"hot paths\" for your database querying habits.\n\nLet's say a new facet of our app is that people can find celebrities born the same year they are. Your query would look something like this.\n\n```cql\nMATCH (p:Person) WHERE p.born = 1967 RETURN p;\n```\n\nA fairly simple query but like we've seen before, this will look at every person on the graph to examine their birth year. Imagine you had all of IMDB's database; that query could wreck a system. Let's use EXPLAIN to see why.\n\n```cql\nEXPLAIN MATCH (p:Person) WHERE p.born = 1967 RETURN p;\n```\n\nYou'll see it gives you a pretty in-depth answer that it will scan all 133 persons and then narrow it down to 13. Let's throw an index on Person's born attribute.\n\n```cql\nCREATE INDEX FOR (p:Person) ON (p.born);\nEXPLAIN MATCH (p:Person) WHERE p.born = 1967 RETURN p;\nMATCH (p:Person) WHERE p.born = 1967 RETURN p;\n```\n\nNow you'll see it immediately can narrow it down. My computer saw a 6x increase in query speed.\n\n[Neo4j has a great article on query planning][query-planning] if you want to dig further into improving query performance.\n\nLastly, sometimes it's useful to see all existing indexes. Try this:\n\n```cql\nCALL db.indexes;\n```\n\n[query-planning]: https://neo4j.com/docs/cypher-manual/4.1/query-tuning/\n","slug":"indexes-in-neo4j","title":"Indexes in Neo4j","section":"Graph","icon":"info-circle","filePath":"/home/runner/work/complete-intro-to-databases-v2/complete-intro-to-databases-v2/lessons/04-graph/E-indexes-in-neo4j.md","nextSlug":"/lessons/graph/nodejs-app-with-neo4j","prevSlug":"/lessons/graph/complex-neo4j-queries"}},"__N_SSG":true}