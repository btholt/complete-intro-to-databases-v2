{"pageProps":{"post":{"attributes":{"description":"Graph databases are great when you need to define relations between objects that can have complex webs of relations especially for things like social networks."},"html":"<p>Let&#39;s get Redis running through Docker. Run this</p>\n<pre><code class=\"hljs language-bash\">docker run -dit --<span class=\"hljs-built_in\">rm</span> --name=my-redis -p 6379:6379 redis:6.0.8\ndocker <span class=\"hljs-built_in\">exec</span> -it my-redis redis-cli\n</code></pre><p>This should drop you into an interactive shell with Redis. Let&#39;s start with some basic sets and gets.</p>\n<h2>SET and GET</h2>\n<pre><code class=\"hljs language-redis\">SET name &quot;Brian Holt&quot;\nGET name\n</code></pre><p>There ya go. That&#39;s it. Pack it up. Go home. We&#39;re done here.</p>\n<p>I mean, just kidding, but pretty close. Redis commands are almost very simple like this. You send a command (e.g. <code>GET</code> and <code>SET</code>), a key (e.g. <code>name</code>) and a value (e.g. the string <code>&quot;Brian Holt&quot;</code>.)</p>\n<h2>Naming Keys</h2>\n<p>Let&#39;s talk a second about naming keys. It&#39;s not sustainable to just a flat name like <code>name</code>. Unlike PostgreSQL and MongoDB where you have tables and collections to logically separate entities, with Redis it&#39;s all one mishmosh of stuff. Only the keys separate what&#39;s in there. So that means you need some sort of key system to keep things separate yet retrievable.</p>\n<p>Let&#39;s say you cache user information. The most commons strategy is to use <code>:</code> to separate and &quot;namespace&quot; keys. So if you had three users named <code>btholt</code>, <code>sarah_edo</code> and <code>scotups</code>, you may store their user info in three different keys like this: <code>user:sarah_edo</code>, <code>user:btholt</code>, and <code>user:scotups</code>. Now we know we can always retrieve <code>user:&lt;user name here&gt;</code> whenever we want user info. We also don&#39;t have to worry that if we cache payments later that we&#39;ll overwrite the <code>scotups</code> key, we can just namespace it different like <code>payment:scotups</code>, <code>payment:1marc</code>, etc. You can even go further and have multiple layers like <code>user:address:btholt</code>. These keys can actually be up to 512MB in length (don&#39;t do that haha) so you can have very long key names. Again, Redis just see this as a key so it&#39;s up to us how we want to namespace it. Redis won&#39;t enforce anything about it.</p>\n<p>While I see <code>:</code> mostly as the delimiter, you&#39;ll see some use <code>/</code> too.</p>\n<p>Technically Redis keys are &quot;binary safe&quot; which means you could have a JPEG (like the actual image itself) as a key. In general I wouldn&#39;t using a binary like that directly since the key will be long and the key comparison it will do will slow down Redis but you could MD5 an image and use that as a key if you were using Redis to disallow-list images or something like that.</p>\n<h2>INCR DECR INCRBY DECRBY</h2>\n<p>A very common thing is wanting to do is do some quick additions or substracts on a value in the store. One of them could be that you&#39;re tracking page views. You could do something like this:</p>\n<pre><code class=\"hljs language-redis\">SET visits 0\nINCR visits\nINCR visits\nINCR visits\nDECR visits\n</code></pre><p>Every time a user hits your website, you could just send a quick command to Redis to increment its store. You don&#39;t need to know right then what the count of visits is. It&#39;s enough to blindly fire off &quot;whatever is there, add 1&quot;. I added a <code>DECR</code> at the end just so you can see how to decrement too.</p>\n<p>What if you need to add or subtract more than just one? One case could be that you&#39;re tracking someone&#39;s score in a (American) football game and one team scores a touchdown. You could do:</p>\n<pre><code class=\"hljs language-redis\">SET scor\nINCRBY score:seahawks 6\nDECRBY score:broncos 3\n</code></pre><p>Same idea, you just have to tell Redis by how much you want to add or subtract.</p>\n<h2>MSET MGET</h2>\n<p>Another thing you can do is do multiple gets at a time as well as multipe sets</p>\n<pre><code class=\"hljs language-redis\">MSET score:seahawks 43 score:broncos 8\nMGET score:seahawks score:broncos\n</code></pre><p>You can have a lot of keys here so this is useful if you need to write or get a lot of things at once.</p>\n<p>There is also [pipelines][pipelines] as well as [transactions][transactions] available to you as well if you need to batch write things. That&#39;s beyond the scope of this intro but just be aware all of these are helpers for doing multiple things at once.</p>\n<h2>EXISTS</h2>\n<p>This is very helpful for making sure you don&#39;t duplicate anything. If you&#39;re write code you&#39;re write a code that needs to explore a maze and you want to make sure you don&#39;t revisit points on a cartesian plane. You could do something like</p>\n<pre><code class=\"hljs language-redis\">SET plane:0:0 visited\nEXISTS plane:1:0\nSET plane:1:0 visited\nEXISTS plane:0:0\nEXISTS plane:1:1\nSET plane:1:1 visited\n</code></pre><p>So it would check each spot on the graph if it had been there, if it had, it would try the next area until it could find somewhere it hadn&#39;t been there before. EXISTS will just give you a true or false if a key exists.</p>\n<h2>DEL</h2>\n<p>Sometimes you need to explictly need to delete something from the cache.</p>\n<pre><code class=\"hljs language-redis\">SET greeting hello\nEXISTS greeting\nDEL greeting\nEXISTS greeting\n</code></pre>","markdown":"\nLet's get Redis running through Docker. Run this\n\n```bash\ndocker run -dit --rm --name=my-redis -p 6379:6379 redis:6.0.8\ndocker exec -it my-redis redis-cli\n```\n\nThis should drop you into an interactive shell with Redis. Let's start with some basic sets and gets.\n\n## SET and GET\n\n```redis\nSET name \"Brian Holt\"\nGET name\n```\n\nThere ya go. That's it. Pack it up. Go home. We're done here.\n\nI mean, just kidding, but pretty close. Redis commands are almost very simple like this. You send a command (e.g. `GET` and `SET`), a key (e.g. `name`) and a value (e.g. the string `\"Brian Holt\"`.)\n\n## Naming Keys\n\nLet's talk a second about naming keys. It's not sustainable to just a flat name like `name`. Unlike PostgreSQL and MongoDB where you have tables and collections to logically separate entities, with Redis it's all one mishmosh of stuff. Only the keys separate what's in there. So that means you need some sort of key system to keep things separate yet retrievable.\n\nLet's say you cache user information. The most commons strategy is to use `:` to separate and \"namespace\" keys. So if you had three users named `btholt`, `sarah_edo` and `scotups`, you may store their user info in three different keys like this: `user:sarah_edo`, `user:btholt`, and `user:scotups`. Now we know we can always retrieve `user:<user name here>` whenever we want user info. We also don't have to worry that if we cache payments later that we'll overwrite the `scotups` key, we can just namespace it different like `payment:scotups`, `payment:1marc`, etc. You can even go further and have multiple layers like `user:address:btholt`. These keys can actually be up to 512MB in length (don't do that haha) so you can have very long key names. Again, Redis just see this as a key so it's up to us how we want to namespace it. Redis won't enforce anything about it.\n\nWhile I see `:` mostly as the delimiter, you'll see some use `/` too.\n\nTechnically Redis keys are \"binary safe\" which means you could have a JPEG (like the actual image itself) as a key. In general I wouldn't using a binary like that directly since the key will be long and the key comparison it will do will slow down Redis but you could MD5 an image and use that as a key if you were using Redis to disallow-list images or something like that.\n\n## INCR DECR INCRBY DECRBY\n\nA very common thing is wanting to do is do some quick additions or substracts on a value in the store. One of them could be that you're tracking page views. You could do something like this:\n\n```redis\nSET visits 0\nINCR visits\nINCR visits\nINCR visits\nDECR visits\n```\n\nEvery time a user hits your website, you could just send a quick command to Redis to increment its store. You don't need to know right then what the count of visits is. It's enough to blindly fire off \"whatever is there, add 1\". I added a `DECR` at the end just so you can see how to decrement too.\n\nWhat if you need to add or subtract more than just one? One case could be that you're tracking someone's score in a (American) football game and one team scores a touchdown. You could do:\n\n```redis\nSET scor\nINCRBY score:seahawks 6\nDECRBY score:broncos 3\n```\n\nSame idea, you just have to tell Redis by how much you want to add or subtract.\n\n## MSET MGET\n\nAnother thing you can do is do multiple gets at a time as well as multipe sets\n\n```redis\nMSET score:seahawks 43 score:broncos 8\nMGET score:seahawks score:broncos\n```\n\nYou can have a lot of keys here so this is useful if you need to write or get a lot of things at once.\n\nThere is also [pipelines][pipelines] as well as [transactions][transactions] available to you as well if you need to batch write things. That's beyond the scope of this intro but just be aware all of these are helpers for doing multiple things at once.\n\n## EXISTS\n\nThis is very helpful for making sure you don't duplicate anything. If you're write code you're write a code that needs to explore a maze and you want to make sure you don't revisit points on a cartesian plane. You could do something like\n\n```redis\nSET plane:0:0 visited\nEXISTS plane:1:0\nSET plane:1:0 visited\nEXISTS plane:0:0\nEXISTS plane:1:1\nSET plane:1:1 visited\n```\n\nSo it would check each spot on the graph if it had been there, if it had, it would try the next area until it could find somewhere it hadn't been there before. EXISTS will just give you a true or false if a key exists.\n\n## DEL\n\nSometimes you need to explictly need to delete something from the cache.\n\n```redis\nSET greeting hello\nEXISTS greeting\nDEL greeting\nEXISTS greeting\n```\n","slug":"redis","title":"Redis","section":"Key Value Store","icon":"info-circle","filePath":"/home/runner/work/complete-intro-to-databases-v2/complete-intro-to-databases-v2/lessons/05-key-value-store/B-redis.md","nextSlug":"/lessons/key-value-store/redis-command-options","prevSlug":"/lessons/key-value-store/key-value-store"}},"__N_SSG":true}